
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Property Checking Start Challenge - Mavnn's blog</title>
  <meta name="author" content="mavnn">

  
  <meta name="description" content="Almost a year ago now, I wrote up a blog post on using FsCheck. I still rate it as an excellent tool, but unfortunately we don&#39;t manage to use it &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">


  <link rel="canonical" href="https://blog.mavnn.co.uk/property-checking-start-challenge/">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Mavnn's blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="https://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Fira+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Fira+Mono:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-37561687-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>

<body   >
  <header role="banner"><hgroup>
  <a href="https://mavnn.co.uk"><img class="swirl-logo" src="/images/swirl.svg"/></a>
  <h1><a href="/">Mavnn's blog</a></h1>
  
    <h2>Stuff from my brain</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="#" method="get" id="searchbox" >
  <fieldset role="search">
    <input type="hidden" id="site_query" value="site:blog.mavnn.co.uk" />
    <input class="search" type="text" name="q" results="0" id="search_query" placeholder="Search"/>
  </fieldset>
</form>
<ul class="main-navigation">
  <li><a href="https://mavnn.co.uk">Main Site</a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  

<!-- for the course -->
<!-- <h5>We're running <a href="/cloud-native-net/">Cloud Native .NET</a> in Brighton, 26th-27th April 2018. High quality training for building .NET Core, distributed, production ready systems.</h5> -->
<!-- take it out up to here... -->



  <header>
    
      <h1 class="entry-title">Property Checking Start Challenge</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-25T12:25:17+01:00" pubdate data-updated="true">Jun 25<span>th</span>, 2014</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Almost a year ago now, I wrote up a <a href="/fscheck-breaking-your-code-in-new-and-exciting-ways/">blog post</a> on using <a href="https://github.com/fsharp/FsCheck">FsCheck</a>. I still rate it as an excellent tool, but unfortunately we don&#39;t manage to use it that much. The reasons for this basically boil down to the fact that a) we tend to forget it exists and b) a good deal of our code is written in C# or VB.net, and the original API is not very friendly from those languages.</p>

<p>So as part of the <a href="http://15below.com/">15below</a> developer education sessions we&#39;re going to try an exercise to see if we can bring a bit more property based testing into our code base!</p>

<!-- more -->

<h2>Never trust the user&#8230;</h2>

<p>One of the things we do quite a lot of as a company is sending either automated voice calls or SMS messages. The phone number we&#39;re trying to contact is often free text provided by the customer, while the voice/SMS companies tend to be very keen on phone numbers that are in (something at least similar to) the <a href="http://en.wikipedia.org/wiki/E.164">international E.164</a> phone number format.</p>

<p>Unfortunately, users don&#39;t tend to very good at sticking to standards in free text fields - so it some point your code needs to make the call about whether you&#39;re convinced the phone number you have is valid or not&#8230;</p>

<p>For the exercise, I&#39;ve created idiomatic stubs of a <code>PhoneNumber</code> class in both F# and C# with methods for creating them that check if the input string is valid. The C# version uses <code>PhoneNumber.TryParse</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
</span><span class='line'><span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
</span><span class='line'><span class="k">using</span> <span class="nn">System.Text.RegularExpressions</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">namespace</span> <span class="nn">CSharp.FsCheck</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">class</span> <span class="nc">PhoneNumber</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">public</span> <span class="kt">int</span> <span class="n">CountryCode</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">private</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>        <span class="k">public</span> <span class="kt">int</span> <span class="n">IdentificationCode</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">private</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>        <span class="k">public</span> <span class="kt">int</span> <span class="n">SubscriberNumber</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">private</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">private</span> <span class="nf">PhoneNumber</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">private</span> <span class="nf">PhoneNumber</span><span class="p">(</span><span class="kt">int</span> <span class="n">countryCode</span><span class="p">,</span> <span class="kt">int</span> <span class="n">identificationCode</span><span class="p">,</span> <span class="kt">int</span> <span class="n">subscriberNumber</span><span class="p">)</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="n">CountryCode</span> <span class="p">=</span> <span class="n">countryCode</span><span class="p">;</span>
</span><span class='line'>            <span class="n">IdentificationCode</span> <span class="p">=</span> <span class="n">identificationCode</span><span class="p">;</span>
</span><span class='line'>            <span class="n">SubscriberNumber</span> <span class="p">=</span> <span class="n">subscriberNumber</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">TryParse</span><span class="p">(</span><span class="kt">string</span> <span class="n">number</span><span class="p">,</span> <span class="k">out</span> <span class="n">PhoneNumber</span> <span class="n">ph</span><span class="p">)</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="kt">var</span> <span class="n">reg</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Regex</span><span class="p">(</span><span class="s">@&quot;\+(?&lt;cc&gt;\d+) (?&lt;ic&gt;\d+) (?&lt;sn&gt;\d+)&quot;</span><span class="p">);</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(!</span><span class="n">reg</span><span class="p">.</span><span class="n">IsMatch</span><span class="p">(</span><span class="n">number</span><span class="p">))</span>
</span><span class='line'>            <span class="p">{</span>
</span><span class='line'>                <span class="n">ph</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
</span><span class='line'>                <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>            <span class="kt">var</span> <span class="n">match</span> <span class="p">=</span> <span class="n">reg</span><span class="p">.</span><span class="n">Match</span><span class="p">(</span><span class="n">number</span><span class="p">);</span>
</span><span class='line'>            <span class="kt">var</span> <span class="n">countryCode</span> <span class="p">=</span> <span class="kt">int</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">match</span><span class="p">.</span><span class="n">Groups</span><span class="p">[</span><span class="s">&quot;cc&quot;</span><span class="p">].</span><span class="n">Value</span><span class="p">);</span>
</span><span class='line'>            <span class="kt">var</span> <span class="n">identificationCode</span> <span class="p">=</span> <span class="kt">int</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">match</span><span class="p">.</span><span class="n">Groups</span><span class="p">[</span><span class="s">&quot;ic&quot;</span><span class="p">].</span><span class="n">Value</span><span class="p">);</span>
</span><span class='line'>            <span class="kt">var</span> <span class="n">subscriberNumber</span> <span class="p">=</span> <span class="kt">int</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">match</span><span class="p">.</span><span class="n">Groups</span><span class="p">[</span><span class="s">&quot;sn&quot;</span><span class="p">].</span><span class="n">Value</span><span class="p">);</span>
</span><span class='line'>            <span class="n">ph</span> <span class="p">=</span> <span class="k">new</span> <span class="n">PhoneNumber</span><span class="p">(</span><span class="n">countryCode</span><span class="p">,</span> <span class="n">identificationCode</span><span class="p">,</span> <span class="n">subscriberNumber</span><span class="p">);</span>
</span><span class='line'>            <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

<p>Whilst the F# version uses a discriminated union:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='fsharp'><span class='line'><span class="k">module</span> <span class="nn">FSharp</span><span class="p">.</span><span class="nn">FsCheck</span><span class="p">.</span><span class="nc">PhoneNumber</span>
</span><span class='line'>
</span><span class='line'><span class="k">open</span> <span class="nn">System</span><span class="p">.</span><span class="nn">Text</span><span class="p">.</span><span class="nc">RegularExpressions</span>
</span><span class='line'>
</span><span class='line'><span class="k">type</span> <span class="nc">PossibleNumber</span> <span class="o">=</span>
</span><span class='line'>    <span class="o">{</span> <span class="nc">CountryCode</span> <span class="o">:</span> <span class="kt">int</span>
</span><span class='line'>      <span class="nc">IdentificationCode</span> <span class="o">:</span> <span class="kt">int</span>
</span><span class='line'>      <span class="nc">SubscriberNumber</span> <span class="o">:</span> <span class="kt">int</span> <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">type</span> <span class="nc">PhoneNumber</span> <span class="o">=</span>
</span><span class='line'>    <span class="o">|</span> <span class="nc">ValidPhoneNumber</span> <span class="k">of</span> <span class="nc">PossibleNumber</span>
</span><span class='line'>    <span class="o">|</span> <span class="nc">InvalidPhoneNumber</span> <span class="k">of</span> <span class="kt">string</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Shadow the name so that no one else</span>
</span><span class='line'><span class="c1">// can create &quot;ValidPhoneNumber&quot;</span>
</span><span class='line'><span class="k">let</span> <span class="nc">ValidPhoneNumber</span> <span class="n">input</span> <span class="o">=</span>
</span><span class='line'>    <span class="k">let</span> <span class="n">reg</span> <span class="o">=</span> <span class="nc">Regex</span><span class="o">(@</span><span class="s2">&quot;</span><span class="err">\</span><span class="s2">+(?&lt;cc&gt;</span><span class="err">\</span><span class="s2">d+) (?&lt;ic&gt;</span><span class="err">\</span><span class="s2">d+) (?&lt;sn&gt;</span><span class="err">\</span><span class="s2">d+)&quot;</span><span class="o">)</span>
</span><span class='line'>    <span class="k">match</span> <span class="n">reg</span><span class="o">.</span><span class="nc">IsMatch</span><span class="o">(</span><span class="n">input</span><span class="o">)</span> <span class="k">with</span>
</span><span class='line'>    <span class="o">|</span> <span class="bp">true</span> <span class="o">-&gt;</span>
</span><span class='line'>        <span class="k">let</span> <span class="n">groups</span> <span class="o">=</span> <span class="n">reg</span><span class="o">.</span><span class="nc">Match</span><span class="o">(</span><span class="n">input</span><span class="o">).</span><span class="nc">Groups</span>
</span><span class='line'>        <span class="nc">ValidPhoneNumber</span> <span class="o">{</span>
</span><span class='line'>            <span class="nc">CountryCode</span> <span class="o">=</span> <span class="n">groups</span><span class="o">.[</span><span class="s2">&quot;cc&quot;</span><span class="o">].</span><span class="nc">Value</span> <span class="o">|&gt;</span> <span class="kt">int</span>
</span><span class='line'>            <span class="nc">IdentificationCode</span> <span class="o">=</span> <span class="n">groups</span><span class="o">.[</span><span class="s2">&quot;ic&quot;</span><span class="o">].</span><span class="nc">Value</span> <span class="o">|&gt;</span> <span class="kt">int</span>
</span><span class='line'>            <span class="nc">SubscriberNumber</span> <span class="o">=</span> <span class="n">groups</span><span class="o">.[</span><span class="s2">&quot;sn&quot;</span><span class="o">].</span><span class="nc">Value</span> <span class="o">|&gt;</span> <span class="kt">int</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">|</span> <span class="bp">false</span> <span class="o">-&gt;</span>
</span><span class='line'>        <span class="nc">InvalidPhoneNumber</span> <span class="s2">&quot;No good&quot;</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>

<p>The challenge will be to use property checking to take the stub to a class that fulfils the following properties:</p>

<ul>
<li>Country code between 1 and 3 digits</li>
<li>Identification code 4 or less digits (may be missing)</li>
<li>Subscription number between 1 and (15 - country code - identification code) digits</li>
<li>Less than 15 total digits</li>
</ul>

<p>These all come straight from the specification - we&#39;re going to ignore country groups for now.</p>

<p>Each of the two projects also includes a PropertyChecks file that contains the skeleton of an NUnit based FsCheck test suite. We only have an hour for our DevEd sessions, so the project includes a reasonable amount to get you going. Each one has a &quot;sanity check&quot; test with a known good phone number, and property based checks for the length of the country code and whether all valid numbers are recognised as valid. To make the second property test work, they also both include a custom
generator for valid phone numbers.</p>

<p>The C# version ended up looking like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
</span><span class='line'><span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
</span><span class='line'><span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
</span><span class='line'><span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
</span><span class='line'><span class="k">using</span> <span class="nn">System.Threading.Tasks</span><span class="p">;</span>
</span><span class='line'><span class="k">using</span> <span class="nn">NUnit.Framework</span><span class="p">;</span>
</span><span class='line'><span class="k">using</span> <span class="nn">FsCheck.Fluent</span><span class="p">;</span>
</span><span class='line'><span class="k">using</span> <span class="nn">FsCheck</span><span class="p">;</span>
</span><span class='line'><span class="k">using</span> <span class="nn">Microsoft.FSharp.Collections</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">namespace</span> <span class="nn">CSharp.FsCheck</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'><span class="na">    [TestFixture]</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">class</span> <span class="nc">ManualChecks</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'><span class="na">        [Test]</span>
</span><span class='line'>        <span class="k">public</span> <span class="k">void</span> <span class="nf">SanityCheck</span><span class="p">()</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="n">PhoneNumber</span> <span class="n">ph</span><span class="p">;</span>
</span><span class='line'>            <span class="n">PhoneNumber</span><span class="p">.</span><span class="n">TryParse</span><span class="p">(</span><span class="s">&quot;+44 123 456789&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="n">ph</span><span class="p">);</span>
</span><span class='line'>            <span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">ph</span><span class="p">.</span><span class="n">CountryCode</span><span class="p">,</span> <span class="m">44</span><span class="p">);</span>
</span><span class='line'>            <span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">ph</span><span class="p">.</span><span class="n">IdentificationCode</span><span class="p">,</span> <span class="m">123</span><span class="p">);</span>
</span><span class='line'>            <span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">ph</span><span class="p">.</span><span class="n">SubscriberNumber</span><span class="p">,</span> <span class="m">456789</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="na">    [TestFixture]</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">class</span> <span class="nc">PropertyChecks</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">public</span> <span class="k">class</span> <span class="nc">GeneratedValidNumber</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">public</span> <span class="kt">int</span> <span class="n">Country</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">private</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>            <span class="k">public</span> <span class="kt">int?</span> <span class="n">Identification</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">private</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>            <span class="k">public</span> <span class="kt">int</span> <span class="n">Subscriber</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">private</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>            <span class="k">public</span> <span class="kt">string</span> <span class="n">InputString</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">private</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">public</span> <span class="nf">GeneratedValidNumber</span><span class="p">(</span><span class="kt">int</span> <span class="n">country</span><span class="p">,</span> <span class="kt">int?</span> <span class="n">identification</span><span class="p">,</span> <span class="kt">int</span> <span class="n">subscriber</span><span class="p">)</span>
</span><span class='line'>            <span class="p">{</span>
</span><span class='line'>                <span class="n">Country</span> <span class="p">=</span> <span class="n">country</span><span class="p">;</span>
</span><span class='line'>                <span class="n">Identification</span> <span class="p">=</span> <span class="n">identification</span><span class="p">;</span>
</span><span class='line'>                <span class="n">Subscriber</span> <span class="p">=</span> <span class="n">subscriber</span><span class="p">;</span>
</span><span class='line'>                <span class="kt">var</span> <span class="n">idString</span> <span class="p">=</span>
</span><span class='line'>                    <span class="n">identification</span><span class="p">.</span><span class="n">HasValue</span> <span class="p">?</span> <span class="s">&quot; &quot;</span> <span class="p">+</span> <span class="n">identification</span><span class="p">.</span><span class="n">ToString</span><span class="p">()</span> <span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
</span><span class='line'>                <span class="n">InputString</span> <span class="p">=</span> <span class="s">&quot;+&quot;</span> <span class="p">+</span> <span class="n">country</span><span class="p">.</span><span class="n">ToString</span><span class="p">()</span> <span class="p">+</span> <span class="n">idString</span> <span class="p">+</span> <span class="s">&quot; &quot;</span> <span class="p">+</span> <span class="n">subscriber</span><span class="p">.</span><span class="n">ToString</span><span class="p">();</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">public</span> <span class="k">override</span> <span class="kt">string</span> <span class="nf">ToString</span><span class="p">()</span>
</span><span class='line'>            <span class="p">{</span>
</span><span class='line'>                <span class="k">return</span> <span class="s">&quot;&lt;&quot;</span> <span class="p">+</span> <span class="n">InputString</span> <span class="p">+</span> <span class="s">&quot;&gt;&quot;</span><span class="p">;</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">public</span> <span class="n">Gen</span><span class="p">&lt;</span><span class="n">GeneratedValidNumber</span><span class="p">&gt;</span> <span class="n">ValidPhoneNumberGenerator</span><span class="p">()</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="kt">var</span> <span class="n">nullableGen</span> <span class="p">=</span>
</span><span class='line'>                <span class="k">from</span> <span class="n">i</span> <span class="k">in</span> <span class="n">Any</span><span class="p">.</span><span class="n">IntBetween</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">9999</span><span class="p">)</span>
</span><span class='line'>                <span class="k">select</span> <span class="k">new</span> <span class="n">Nullable</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="n">i</span><span class="p">);</span>
</span><span class='line'>            <span class="kt">var</span> <span class="n">numberGen</span> <span class="p">=</span>
</span><span class='line'>                <span class="k">from</span> <span class="n">country</span> <span class="k">in</span> <span class="n">Any</span><span class="p">.</span><span class="n">IntBetween</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">999</span><span class="p">)</span>
</span><span class='line'>                <span class="k">from</span> <span class="n">identification</span> <span class="k">in</span> <span class="n">Any</span><span class="p">.</span><span class="n">GeneratorIn</span><span class="p">&lt;</span><span class="kt">int?</span><span class="p">&gt;(</span><span class="n">nullableGen</span><span class="p">,</span> <span class="n">Any</span><span class="p">.</span><span class="n">Value</span><span class="p">&lt;</span><span class="kt">int?</span><span class="p">&gt;(</span><span class="k">null</span><span class="p">))</span>
</span><span class='line'>                <span class="k">from</span> <span class="n">subscriber</span> <span class="k">in</span> <span class="n">Any</span><span class="p">.</span><span class="n">IntBetween</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">99999999</span><span class="p">)</span>
</span><span class='line'>                <span class="k">select</span> <span class="k">new</span> <span class="nf">GeneratedValidNumber</span><span class="p">(</span><span class="n">country</span><span class="p">,</span> <span class="n">identification</span><span class="p">,</span> <span class="n">subscriber</span><span class="p">);</span>
</span><span class='line'>            <span class="k">return</span> <span class="n">numberGen</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="na">        [Test]</span>
</span><span class='line'>        <span class="k">public</span> <span class="k">void</span> <span class="nf">CountryCodeLessThan4digits</span><span class="p">()</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="n">Spec</span><span class="p">.</span><span class="n">ForAny</span><span class="p">(</span>
</span><span class='line'>                <span class="p">(</span><span class="n">DontSize</span><span class="p">&lt;</span><span class="kt">uint</span><span class="p">&gt;</span> <span class="n">country</span><span class="p">)</span> <span class="p">=&gt;</span>
</span><span class='line'>                <span class="p">{</span>
</span><span class='line'>                    <span class="kt">var</span> <span class="n">cc</span> <span class="p">=</span> <span class="n">country</span><span class="p">.</span><span class="n">Item</span><span class="p">;</span>
</span><span class='line'>                    <span class="n">PhoneNumber</span> <span class="n">ph</span><span class="p">;</span>
</span><span class='line'>                    <span class="kt">var</span> <span class="n">ec</span> <span class="p">=</span> <span class="n">PhoneNumber</span><span class="p">.</span><span class="n">TryParse</span><span class="p">(</span><span class="s">&quot;+&quot;</span> <span class="p">+</span> <span class="n">cc</span><span class="p">.</span><span class="n">ToString</span><span class="p">()</span> <span class="p">+</span> <span class="s">&quot; 1234 123456&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="n">ph</span><span class="p">);</span>
</span><span class='line'>                    <span class="k">return</span> <span class="n">ph</span><span class="p">.</span><span class="n">CountryCode</span> <span class="p">&lt;</span> <span class="m">1000</span><span class="p">;</span>
</span><span class='line'>                <span class="p">})</span>
</span><span class='line'>                <span class="p">.</span><span class="n">QuickCheckThrowOnFailure</span><span class="p">();</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="na">        [Test]</span>
</span><span class='line'>        <span class="k">public</span> <span class="k">void</span> <span class="nf">ValidNumbersAreRecognized</span><span class="p">()</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="n">Spec</span><span class="p">.</span><span class="n">For</span><span class="p">(</span><span class="n">ValidPhoneNumberGenerator</span><span class="p">(),</span>
</span><span class='line'>                <span class="p">(</span><span class="n">GeneratedValidNumber</span> <span class="n">n</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span class='line'>                    <span class="n">PhoneNumber</span> <span class="n">ph</span><span class="p">;</span>
</span><span class='line'>                    <span class="k">return</span> <span class="n">PhoneNumber</span><span class="p">.</span><span class="n">TryParse</span><span class="p">(</span><span class="n">n</span><span class="p">.</span><span class="n">InputString</span><span class="p">,</span> <span class="k">out</span> <span class="n">ph</span><span class="p">);</span>
</span><span class='line'>                <span class="p">})</span>
</span><span class='line'>                <span class="p">.</span><span class="n">QuickCheckThrowOnFailure</span><span class="p">();</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

<p>while the F# version looks like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
</pre></td><td class='code'><pre><code class='fsharp'><span class='line'><span class="k">module</span> <span class="nn">FSharp</span><span class="p">.</span><span class="nn">FsCheck</span><span class="p">.</span><span class="nc">PropertyChecks</span>
</span><span class='line'>
</span><span class='line'><span class="k">open</span> <span class="nc">FsCheck</span>
</span><span class='line'><span class="k">open</span> <span class="nn">NUnit</span><span class="p">.</span><span class="nc">Framework</span>
</span><span class='line'><span class="k">open</span> <span class="nc">PhoneNumber</span>
</span><span class='line'>
</span><span class='line'><span class="k">type</span> <span class="nc">GeneratedValidNumber</span> <span class="o">=</span>
</span><span class='line'>    <span class="o">{</span> <span class="nc">Country</span> <span class="o">:</span> <span class="kt">int</span>
</span><span class='line'>      <span class="nc">Identifier</span> <span class="o">:</span> <span class="kt">int</span> <span class="n">option</span>
</span><span class='line'>      <span class="nc">Subscriber</span> <span class="o">:</span> <span class="kt">int</span>
</span><span class='line'>      <span class="nc">InputString</span> <span class="o">:</span> <span class="kt">string</span> <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">let</span> <span class="n">validNumberGen</span> <span class="o">=</span>
</span><span class='line'>    <span class="n">gen</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">let</span><span class="o">!</span> <span class="n">c</span> <span class="o">=</span> <span class="nn">Gen</span><span class="p">.</span><span class="n">choose</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">999</span><span class="o">)</span>
</span><span class='line'>        <span class="k">let</span><span class="o">!</span> <span class="n">i</span> <span class="o">=</span> <span class="nn">Gen</span><span class="p">.</span><span class="n">oneof</span> <span class="o">[</span> <span class="n">gen</span> <span class="o">{</span> <span class="k">let</span><span class="o">!</span> <span class="n">i</span> <span class="o">=</span> <span class="nn">Gen</span><span class="p">.</span><span class="n">choose</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">9999</span><span class="o">)</span>
</span><span class='line'>                                   <span class="k">return</span> <span class="o">(</span><span class="nc">Some</span> <span class="n">i</span><span class="o">)</span> <span class="o">}</span>
</span><span class='line'>                             <span class="n">gen</span> <span class="o">{</span> <span class="k">return</span> <span class="nc">None</span> <span class="o">}</span> <span class="o">]</span>
</span><span class='line'>        <span class="k">let</span> <span class="n">maxSubLength</span> <span class="o">=</span>
</span><span class='line'>            <span class="kt">float</span> <span class="o">&lt;|</span> <span class="mi">15</span> <span class="o">-</span> <span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="nc">ToString</span><span class="bp">()</span><span class="o">.</span><span class="nc">Length</span><span class="o">)</span> <span class="o">-</span> <span class="o">(</span><span class="k">match</span> <span class="n">i</span> <span class="k">with</span>
</span><span class='line'>                                                   <span class="o">|</span> <span class="nc">None</span> <span class="o">-&gt;</span> <span class="mi">0</span>
</span><span class='line'>                                                   <span class="o">|</span> <span class="nc">Some</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span><span class="o">.</span><span class="nc">ToString</span><span class="bp">()</span><span class="o">.</span><span class="nc">Length</span><span class="o">)</span>
</span><span class='line'>        <span class="k">let</span><span class="o">!</span> <span class="n">s</span> <span class="o">=</span> <span class="nn">Gen</span><span class="p">.</span><span class="n">choose</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="o">(</span><span class="kt">int</span> <span class="o">&lt;|</span> <span class="mi">10</span><span class="o">.</span> <span class="o">**</span> <span class="n">maxSubLength</span><span class="o">)</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span>
</span><span class='line'>        <span class="k">return</span> <span class="o">{</span> <span class="nc">Country</span> <span class="o">=</span> <span class="n">c</span>
</span><span class='line'>                 <span class="nc">Identifier</span> <span class="o">=</span> <span class="n">i</span>
</span><span class='line'>                 <span class="nc">Subscriber</span> <span class="o">=</span> <span class="n">s</span>
</span><span class='line'>                 <span class="nc">InputString</span> <span class="o">=</span>
</span><span class='line'>                     <span class="n">sprintf</span> <span class="s2">&quot;+%d%s %d&quot;</span> <span class="n">c</span> <span class="o">(</span><span class="k">match</span> <span class="n">i</span> <span class="k">with</span>
</span><span class='line'>                                           <span class="o">|</span> <span class="nc">None</span> <span class="o">-&gt;</span> <span class="s2">&quot;&quot;</span>
</span><span class='line'>                                           <span class="o">|</span> <span class="nc">Some</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">sprintf</span> <span class="s2">&quot; %d&quot;</span> <span class="n">x</span><span class="o">)</span> <span class="n">s</span> <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">type</span> <span class="nc">PhoneNumberGenerators</span> <span class="o">=</span>
</span><span class='line'>    <span class="k">static</span> <span class="k">member</span> <span class="nc">Valid</span><span class="bp">()</span> <span class="o">=</span>
</span><span class='line'>        <span class="o">{</span> <span class="k">new</span> <span class="nc">Arbitrary</span><span class="o">&lt;</span><span class="nc">GeneratedValidNumber</span><span class="o">&gt;</span><span class="bp">()</span> <span class="k">with</span>
</span><span class='line'>            <span class="k">override</span> <span class="n">x</span><span class="o">.</span><span class="nc">Generator</span> <span class="o">=</span> <span class="n">validNumberGen</span> <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">[&lt;</span><span class="nc">Test</span><span class="o">&gt;]</span>
</span><span class='line'><span class="k">let</span> <span class="o">``</span><span class="nc">Sanity</span> <span class="n">check</span><span class="o">``</span><span class="bp">()</span> <span class="o">=</span>
</span><span class='line'>    <span class="k">match</span> <span class="nc">ValidPhoneNumber</span> <span class="s2">&quot;+44 1234 123456&quot;</span> <span class="k">with</span>
</span><span class='line'>    <span class="o">|</span> <span class="nc">ValidPhoneNumber</span> <span class="n">n</span> <span class="o">-&gt;</span>
</span><span class='line'>        <span class="nn">Assert</span><span class="p">.</span><span class="nc">AreEqual</span><span class="o">(</span><span class="n">n</span><span class="o">.</span><span class="nc">CountryCode</span><span class="o">,</span> <span class="mi">44</span><span class="o">)</span>
</span><span class='line'>        <span class="nn">Assert</span><span class="p">.</span><span class="nc">AreEqual</span><span class="o">(</span><span class="n">n</span><span class="o">.</span><span class="nc">IdentificationCode</span><span class="o">,</span> <span class="mi">1234</span><span class="o">)</span>
</span><span class='line'>        <span class="nn">Assert</span><span class="p">.</span><span class="nc">AreEqual</span><span class="o">(</span><span class="n">n</span><span class="o">.</span><span class="nc">SubscriberNumber</span><span class="o">,</span> <span class="mi">123456</span><span class="o">)</span>
</span><span class='line'>    <span class="o">|</span> <span class="nc">InvalidPhoneNumber</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="nn">Assert</span><span class="p">.</span><span class="nc">Fail</span><span class="bp">()</span>
</span><span class='line'>
</span><span class='line'><span class="o">[&lt;</span><span class="nc">Test</span><span class="o">&gt;]</span>
</span><span class='line'><span class="k">let</span> <span class="o">``</span><span class="nc">Insanity</span> <span class="n">check</span><span class="o">``</span><span class="bp">()</span> <span class="o">=</span>
</span><span class='line'>    <span class="k">match</span> <span class="nc">ValidPhoneNumber</span> <span class="s2">&quot;I&#39;m not a phone number&quot;</span> <span class="k">with</span>
</span><span class='line'>    <span class="o">|</span> <span class="nc">ValidPhoneNumber</span> <span class="n">n</span> <span class="o">-&gt;</span> <span class="nn">Assert</span><span class="p">.</span><span class="nc">Fail</span><span class="bp">()</span>
</span><span class='line'>    <span class="o">|</span> <span class="nc">InvalidPhoneNumber</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="bp">()</span>
</span><span class='line'>
</span><span class='line'><span class="o">[&lt;</span><span class="nc">Test</span><span class="o">&gt;]</span>
</span><span class='line'><span class="k">let</span> <span class="o">``</span><span class="nc">Country</span> <span class="n">code</span> <span class="n">less</span> <span class="n">than</span> <span class="mi">4</span> <span class="n">digits</span><span class="o">``</span><span class="bp">()</span> <span class="o">=</span>
</span><span class='line'>    <span class="k">let</span> <span class="n">genNumber</span> <span class="o">(</span><span class="nc">DontSize</span><span class="o">(</span><span class="n">cc</span> <span class="o">:</span> <span class="kt">uint32</span><span class="o">))</span> <span class="o">=</span>
</span><span class='line'>        <span class="k">match</span> <span class="nc">ValidPhoneNumber</span><span class="o">(</span><span class="s2">&quot;+&quot;</span> <span class="o">+</span> <span class="n">cc</span><span class="o">.</span><span class="nc">ToString</span><span class="bp">()</span> <span class="o">+</span> <span class="s2">&quot; 1234 123456&quot;</span><span class="o">)</span> <span class="k">with</span>
</span><span class='line'>        <span class="o">|</span> <span class="nc">ValidPhoneNumber</span> <span class="n">n</span> <span class="o">-&gt;</span> <span class="nn">Assert</span><span class="p">.</span><span class="nc">IsTrue</span><span class="o">(</span><span class="n">n</span><span class="o">.</span><span class="nn">CountryCode</span><span class="p">.</span><span class="nc">ToString</span><span class="bp">()</span><span class="o">.</span><span class="nc">Length</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="o">)</span>
</span><span class='line'>        <span class="o">|</span> <span class="nc">InvalidPhoneNumber</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="bp">()</span>
</span><span class='line'>    <span class="nn">Check</span><span class="p">.</span><span class="nc">QuickThrowOnFailure</span> <span class="n">genNumber</span>
</span><span class='line'>
</span><span class='line'><span class="o">[&lt;</span><span class="nc">Test</span><span class="o">&gt;]</span>
</span><span class='line'><span class="k">let</span> <span class="o">``</span><span class="nc">Valid</span> <span class="n">numbers</span> <span class="n">are</span> <span class="n">counted</span> <span class="k">as</span> <span class="n">valid</span><span class="o">``</span> <span class="bp">()</span> <span class="o">=</span>
</span><span class='line'>    <span class="nn">Arb</span><span class="p">.</span><span class="n">register</span><span class="o">&lt;</span><span class="nc">PhoneNumberGenerators</span><span class="o">&gt;</span> <span class="bp">()</span> <span class="o">|&gt;</span> <span class="n">ignore</span>
</span><span class='line'>    <span class="nn">Check</span><span class="p">.</span><span class="nc">VerboseThrowOnFailure</span> <span class="o">(</span>
</span><span class='line'>        <span class="k">fun</span> <span class="o">(</span><span class="n">v</span><span class="o">:</span><span class="nc">GeneratedValidNumber</span><span class="o">)</span> <span class="o">-&gt;</span>
</span><span class='line'>            <span class="k">match</span> <span class="nc">ValidPhoneNumber</span> <span class="n">v</span><span class="o">.</span><span class="nc">InputString</span> <span class="k">with</span>
</span><span class='line'>            <span class="o">|</span> <span class="nc">ValidPhoneNumber</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="bp">true</span>
</span><span class='line'>            <span class="o">|</span> <span class="nc">InvalidPhoneNumber</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="bp">false</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>

<p>These run fine as NUnit tests - apart from the fact that in true TDD style, they fail.</p>

<h2>The challenge!</h2>

<p>So, the challenge (which is open to people outside 15below as well). Basically, fork the <a href="https://github.com/mavnn/DevEd.PropertyChecks">git repository</a> and then check out locally. This contains everything, including both projects and the binaries of all their dependencies to avoid any NuGet issues. Within 15below, we&#39;ll be working in pairs - otherwise when you&#39;re sitting at your own computer with &quot;real work&quot; to do, it&#39;s very hard to actually take the hour out on the exercise.</p>

<p>In the order of your choice:</p>

<ol>
<li>Add property checks for the missing properties above</li>
<li>Update the PhoneNumber class to pass all of the tests</li>
<li><em>Extra credit</em>: Add a generator for local numbers from a known country (i.e. the UK) and property test your conversion method</li>
<li><em>Extra credit 2</em>: complete any of all of the above in both F# and C#</li>
<li><em>Completely carried away:</em> pick a real piece of production code and add a property test to it&#8230;</li>
</ol>

<p>Once you&#39;ve got as far as you&#39;re going to, commit your changes and push back up to GitHub, then send a pull request with progress back to the parent repository. I won&#39;t merge these, but the different implementations of both the phone number class and property tests will form the basis of the DevEd session the week after, possibly with votes for the most elegant/robust solutions. If you&#39;re not a member of staff here at 15below, I&#39;ll try and update your pull request with any
feedback from our discussions!</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">mavnn</span></span>

      








  


<time datetime="2014-06-25T12:25:17+01:00" pubdate data-updated="true">Jun 25<span>th</span>, 2014</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/csharp/'>csharp</a>, <a class='category' href='/blog/categories/fsharp/'>fsharp</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="https://blog.mavnn.co.uk/property-checking-start-challenge/" data-via="mavnn" data-counturl="https://blog.mavnn.co.uk/property-checking-start-challenge/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/tap/" title="Previous Post: Tap, tap, tapping on the door">&laquo; Tap, tap, tapping on the door</a>
      
      
        <a class="basic-alignment right" href="/remote-working/" title="Next Post: If I Ruled the World... Remote Working">If I Ruled the World... Remote Working &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Hire the Author</h1>
  <p>
    Want some help in any of the areas you've read about? Hop across to
    <a href="https://mavnn.co.uk">mavnn.co.uk</a> where you can hire the
    author.
  </p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/working-from-home/">Working From Home, Pandemic Edition</a>
      </li>
    
      <li class="post">
        <a href="/free-probabilities/">Free Probabilities</a>
      </li>
    
      <li class="post">
        <a href="/shake-generated-files/">Shake: Generated Files</a>
      </li>
    
      <li class="post">
        <a href="/shake-linting/">Shake: Linting and Formatting</a>
      </li>
    
      <li class="post">
        <a href="/shake-the-intro/">Shake: The Intro</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/mavnn">@mavnn</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'mavnn',
            count: 3,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2020 - mavnn -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
        this.page.url = 'https://blog.mavnn.co.uk/property-checking-start-challenge/';
        this.page.identifier = 'https://blog.mavnn.co.uk/property-checking-start-challenge/';
    };
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = 'https://mavnn.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>






  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>



<script type="text/javascript">
 (function() {
   const searchbox = document.getElementById("searchbox");
   const site_query = document.getElementById("site_query").value;
   const search_query = document.getElementById("search_query");

   searchbox.onsubmit = function() {
     const q = encodeURIComponent(search_query.value);
     document.location.assign("https://google.com/search?q=" + site_query + "+" + q);
     return false;
   };
 })()
</script>


</body>
</html>
